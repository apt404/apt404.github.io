<html>

<head>
    <meta charset="utf-8">
    
    <title>APT404-不作恶</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon/favicon.ico">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/tagplugins.css">
    <link rel="stylesheet" href="/css/highlight.css">
    


    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="APT404-不作恶" type="application/atom+xml" />
    
</head>

<body>
  <div class="blog-header">
   <a id="menu-nav-icon"><img src="/image/menu.png"/></a>
   <div class="nav-container">
     <nav id="main-nav">
       
         <a class="main-nav-link" href="/">Home</a>
       
         <a class="main-nav-link" href="/archives">Archives</a>
       
     </nav>
   </div>
   <!--
   <div id="search-form-wrap">
     <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://apt404.github.io"></form>
   </div>
 -->
    <h1 class="blog-title">APT404-不作恶</h1>
    <p class="lead blog-description">在路上，一直在路上！</p>
</div>

  <div id='main-part'>
      
    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/29/cobalt-strike-dns/">对 Cobalt Strike DNS隧道的理解与实战</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-29
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 开始之前,有必要先稍微理解下基于<code>dns beacon的大致通信过程</code>,其实,非常非常简单,前提是你对dns的解析过程早已经烂透于心,不熟悉的朋友可以先去参考前段时间写的 <a href="https://klionsec.github.io/2017/12/11/Dns-tips/" target="_blank" rel="noopener">[DNS 深度理解 一] </a>,把基础打扎实了,再回过头来理解这些东西自然就易如反掌了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-&gt; beacon shell会向指定的域名发起正常的dns查询</span><br><span class="line">  -&gt; 中间依然是经过一些列的常规dns迭代及递归查询,大致过程就是,一直从根开始找,直到找到我们自己的ns服务器,最后再定位到团队服务器ip,仅此而已</span><br><span class="line">    -&gt; 也就是说,第一次通信可能会慢点,后续就会稍微快些,不过说实话,dns再快也快不到哪里去,毕竟,我们要的是足够的隐蔽,而不一味追求速度,不然容易露点</span><br></pre></td></tr></table></figure></p>
<p>0x02 废话说完,我们就开始来尝试在实战中应用,首先,你要先买台<code>vps</code>,亚马逊或者<code>vultr</code>都挺不错的,自己也一直在用,之后装好系统,推荐用<code>ubuntu</code>,此处演示用的是<code>ubuntu 16.04.2</code>,具体的系统安装方法直接一路点点点就好了,全程傻瓜化,大概等个六七分钟,待系统初始化完成就可以用ssh连上去了<br>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/29/cobalt-strike-dns/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/DNS隧道/">DNS隧道</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/DNS隧道/">#DNS隧道</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/29/cobalt-strike-spawn/">灵活使用 Cobalt Strike 的 `Spawn` 功能</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-29
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 关于 beacon 强大的派生功能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">简单理解,所谓的`派生`,即仅仅通过一个beacon shell就可以再孵化出n个shell,shell与shell之间相当于以一种级联的形式存在的</span><br><span class="line">而团队服务器则位于这些节点的根节点位置,连接这些节点的则是`beacon隧道`自己,此功能可有效提高一个渗透团队成员间的协同作战能力,快速共享渗透资源</span><br><span class="line">当然,这也势必会在后期形成一个非常复杂的`渗透网络`,不过这也正好方便大家同时多点切入,说白点儿,其实就类似于一个大型的分布式入侵系统</span><br><span class="line">而这一切的根本保证就是我们在公网中的各个团队服务器节点,只要团队服务器节点不挂,权限就不太容易丢,除非活不干净,被人主动发现了</span><br><span class="line">因为其内部涉及到的细节还非常深,也绝不是一两句话就能说清楚的,但作为使用者,我们只需理解其大致的工作流程即可</span><br><span class="line">如果你自己真的有非常强的 RAT &amp; 逆向 &amp; 协议分析 能力,可以再继续深入研究,始终认为,cobalt strike 确实是一个非常值得深入学习的优秀样本</span><br><span class="line">如果能真正把它搞通透了,基础协议这一块对你来讲,基本就不再有盲区,废话不多说,我们还是在实战中多多体会吧...</span><br></pre></td></tr></table></figure></p>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/29/cobalt-strike-spawn/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/spawn/">spawn</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/spawn/">#spawn</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/27/powershell-pic-execute/">通过图片免杀执行远程Powershell代码</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-27
        
            by klion
        
    </p>

    

    <!-- Content -->
    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/klionsec/Invoke-PSImage</span><br><span class="line">C:\&gt;powershell -exec bypass</span><br><span class="line">PS C:\&gt; Import-Module .\Invoke-PSImage.ps1</span><br><span class="line">PS C:\&gt; Invoke-PSImage -Script .\Download-Execute-PS.ps1 -Image .\large.JPG -Out .\reverse_shell.png -Web</span><br></pre></td></tr></table></figure>
<p>免杀抓取系统用户明文密码</p>
<p><img src="/img/remote ps code.gif" alt=""><br>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/27/powershell-pic-execute/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/PSImage/">PSImage</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/PSImage/">#PSImage</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/26/modify-hacked/">用Shell对指定站点进行简单的实时入侵预警</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-26
        
            by klion
        
    </p>

    

    <!-- Content -->
    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author by klion</span><br><span class="line"># 2017.12.25</span><br><span class="line"># Real-time monitoring of Web Directory script</span><br><span class="line"></span><br><span class="line">web_dir=&quot;/usr/local/nginx/html/bwapp/bWAPP/&quot;</span><br><span class="line">oldnum=`wc -l web_history_db.log | awk -F &quot; &quot; &apos;&#123;print $1&#125;&apos;`</span><br><span class="line">newnum=`find $web_dir -type f | wc -l`</span><br><span class="line">md5num=`md5sum -c web_history_db.log | grep -i FAILED | wc -l`</span><br><span class="line"></span><br><span class="line"># 先对指定的站点目录创建指纹库</span><br><span class="line">[ ! -f web_history_db.log  ] &amp;&amp; &#123;</span><br><span class="line">    find $web_dir -type f | xargs md5sum &gt; ./web_history_db.log</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 和新文件对比指纹,如果发现不对,就马上发信通知,并带上被改动的文件路径一起</span><br><span class="line">[ $md5num -ne 0 ] &amp;&amp; &#123;</span><br><span class="line">    md5sum -c web_history_db.log | grep -i &quot;FAILED&quot; | awk -F &quot;:&quot; &apos;&#123;print $1&#125;&apos; &gt; web_mod_`date +%Y-%m-%d-%H-%M-%S`.web.log</span><br><span class="line">    log_file=`ls -l *.web.log | head -n 1 | awk -F &quot; &quot; &apos;&#123;print $9&#125;&apos;`</span><br><span class="line">    mail -s &quot;Your website may be hacked, Please check it as soon as possible&quot; klion@protonmail.com &lt; $log_file;sleep 5</span><br><span class="line">    rm -fr $log_file</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 对比文件个数,发现不对,同样是立马发信,因为有可能要同时监控很多个站点目录,所以就顺便把具体的站点路径也带上了</span><br><span class="line">[ $oldnum -ne $newnum  ] &amp;&amp; &#123;</span><br><span class="line">    echo &quot;website directory is $web_dir&quot; | mail -s &quot;web directory have new file created &quot; klion@protonmail.com ;sleep 5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/26/modify-hacked/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/webhack/">webhack</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/webhack/">#webhack</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/26/modify-webshell/">实时精准侦测站点目录中的各类 Webshell</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-26
        
            by klion
        
    </p>

    

    <!-- Content -->
    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author by klion</span><br><span class="line"># 2017.12.25</span><br><span class="line"># Delete webshell auto </span><br><span class="line"></span><br><span class="line">webshell_log=&quot;/var/log/webshell.log&quot;</span><br><span class="line">upload_shell=&quot;/var/log/modify.tmp&quot;</span><br><span class="line"></span><br><span class="line"># 只要一检测到有新事件发生就立马打包上传检测</span><br><span class="line">[ -s $webshell_log ] &amp;&amp;&#123;</span><br><span class="line">    awk -F &quot; &quot; &apos;&#123;print $3&#125;&apos; $webshell_log |grep -E &quot;.php$&quot;| sort -u &gt; $upload_shell</span><br><span class="line">    cat $upload_shell |xargs zip ./maybeshell.zip</span><br><span class="line">    echo `curl https://scanner.baidu.com/enqueue -F archive=@maybeshell.zip` | mail -s &quot;webshell detect url api&quot; klion@protonmail.com </span><br><span class="line">    sleep 5</span><br><span class="line">    &gt; $webshell_log &amp;&amp; &gt; $upload_shell &amp;&amp; rm -fr ./maybeshell.zip</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/26/modify-webshell/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/webhack/">webhack</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/webhack/">#webhack</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/24/keepalived-nginx/">Keepalived + Nginx 初步实现高可用</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-24
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 关于 keepalived<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">早期是专为 `LVS` 设计的,主要用来监控LVS集群中各个节点状态</span><br><span class="line">内部基于 `VRRP协议` 实现,即`虚拟路由冗余协议`,从名字不难看出,协议本身是用于保证实现路由节点高可用的</span><br></pre></td></tr></table></figure></p>
<p>0x02 所谓的 VRRP 协议<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">简单来讲,即将N台提供相同功能的路由器组成一个路由器组,在这个组里有一个master和多个backup</span><br><span class="line">一般情况下,master是由选举算法产生的,另外需要注意的是,只有在 master 上才有一个用于对外提供服务的虚拟ip</span><br><span class="line">其它的backup都是没有的,当master在对外提供服务时,其它的backup又在干什么呢</span><br><span class="line">很简单,当master在对外提供服务时,它同时也在不停的向所有的backup发送VRRP状态信息 `说白点儿就是心跳包`</span><br><span class="line">告诉所有backup们,说,&apos;我还没累死,你们先歇着,等我挂了,你们再上&apos;,然后,所有的backup就会一直在那儿闲着不停地接收这样的状态信息</span><br><span class="line">当某一时刻,backup突然没再接到这样的状态回应时,就说明master已经光荣牺牲了</span><br><span class="line">所有的backup会再重新用选举算法,把优先级最高的backup升级为master继续对外提供服务,以此保证了服务的持续可用性,即所谓的高可用</span><br></pre></td></tr></table></figure></p>
<p>0x03 借助 keepalived 在web上的高可用实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">首先,在所有需要进行高可用的web节点机器上部署好keepalived,并在节点中设置一个master,其它的则全部设为backup</span><br><span class="line">一旦backup接收不到来自master的心跳数据,即认为master已挂掉,backup随即就会接管master的所有资源数据</span><br><span class="line">当master状态恢复时,backup会把所有的资源数据再移交给master处理,此,即为最简单的web高可用实现</span><br></pre></td></tr></table></figure></p>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/24/keepalived-nginx/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/keepalived-高可用/">keepalived 高可用</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/keepalived-高可用/">#keepalived 高可用</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/22/nginx-static-dynamic/">利用 `Nginx反向代理` 实现的动静分离</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-22
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 关于 <code>动静分离</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主要用于一些较大型的站点架构,这样做一定程度上可以有效减轻后端节点压力,也就是说,有时候你在前端url中看到的一个目录,其后端对应的很可能就是一个集群</span><br><span class="line">另外,这样会使网站更加静态化,利于缓存,可显著提高网站访问速度,有效实现前后端解耦,但这样无疑会加大开发的繁琐程度,前后端只能通过各种接口进行通信</span><br></pre></td></tr></table></figure></p>
<p>0x02 此次演示环境<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NginxHttp	ip: 192.168.3.49	对应域名: reverse.org		nginx反向代理服务器</span><br><span class="line">OldLamp		ip: 192.168.3.45	对应域名: www.bwapp.cc		假设为动态服务器</span><br><span class="line">OldLnmp		ip: 192.168.3.42	对应域名: test.bwapp.org 	假设为静态服务器</span><br></pre></td></tr></table></figure></p>
<p>0x03 务必先统一所有机器的host解析,因为等会儿要直接用域名的方式往后抛,如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/hosts</span><br><span class="line">  192.168.3.42	test.bwapp.org bwapp.org</span><br><span class="line">  192.168.3.45	bwapp.cc www.bwapp.cc</span><br><span class="line">  192.168.3.75  lvs.org</span><br><span class="line">  192.168.3.49	reverse.org</span><br></pre></td></tr></table></figure></p>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/22/nginx-static-dynamic/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/动静分离/">动静分离</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/动静分离/">#动静分离</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/21/ldap-sec/">初探 LDAP 安全 [ 一 ]</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-21
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 关于 ldap 的一些简单科普<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">`ldap` 基于tcp/ip的轻量级目录访问协议,属于X.500目录协议族的一个简化版本</span><br><span class="line">你可以暂时把它粗暴的理解成 `一种特殊类型的数据库` ,通常,这种数据库文件后缀都为`.ldif`,并使用特殊的节点查询语句来获取相应数据</span><br><span class="line">实际生产环境中,主要还是用它来做各种查询比较多,既是查询,也就意味着肯定会有大量的读操作</span><br><span class="line">虽然,ldap也支持一些简单的更新功能,即写,但一般都不会用,因为它在写方面的效率并不高</span><br><span class="line">如果真的是写比较多,直接用各种关系型数据库代替就好了,实在没必要用ldap,毕竟,术业有专攻</span><br><span class="line">另外,ldap 跨平台,功能简洁,易管理,配置,读性能也不错,亦可分布式部署`不知道是不是可以把它的分布式理解成windows域的目录树,目录林概念`</span><br><span class="line">用的最多的可能就是进行`集中身份验证`,最后,我们还需要知道的是,默认情况下,ldap的所有数据都是直接以明文传输的,容易被截获,不过好在它支持ssl</span><br></pre></td></tr></table></figure></p>
<p>0x02 其它的一些常用目录服务工具<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X.500 		过于庞大臃肿</span><br><span class="line">ldap  		轻量且配置简单</span><br><span class="line">windows活动目录  有平台限制</span><br><span class="line">NIS		个人暂时还没接触过</span><br></pre></td></tr></table></figure></p>
<p>0x03 了解ldap内部数据的大致存储方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">和常规关系型数据库不同的是,ldap并非按照常规的库,表,字段方式来存储数据</span><br><span class="line">而是按照一种特殊的倒树状结构层级来组织管理数据,此处的树指的就是目录信息树,即`DIT`</span><br><span class="line">所谓的目录信息树其实相当于专门用来进行读操作的数据库</span><br><span class="line">在DIT内部则由N个条目`entry`所组成,就相当于我们常规数据库表中每条具体的记录</span><br><span class="line">而条目的内容则是由具有唯一标识名`DN`的属性[Attribute]及属性对应的值[value]所组成的这么一个集合</span><br><span class="line">条目为ldap中最基础的操作单位,通常对ldap的增删改查都是以条目为基本单元进行的</span><br></pre></td></tr></table></figure></p>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/21/ldap-sec/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/LDAP安全/">LDAP安全</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/LDAP安全/">#LDAP安全</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/17/tomcat-sec/">Tomcat 安全部署实战指南</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-17
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 关于Tomcat,更多详情大家可直接参考百科说明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://zh.wikipedia.org/wiki/Apache_Tomcat</span><br></pre></td></tr></table></figure></p>
<p>此次演示环境<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS7 x86_64 	ip: 192.168.3.64</span><br><span class="line">Apache Tomcat/8.5.24 	建议大家使用较新版的稳定版本</span><br></pre></td></tr></table></figure></p>
<p>0x02 首先,在正式部署Tomcat之前,需要先来准备好jdk环境,因为毕竟底层还是在靠java来处理,所以必须要先得有java的运行环境才行,其实,在实际生产环境中,也可以单独使用<code>jre</code>,不过个人觉得这和安全的关系并不大,试想,如果你手里都已经拿到了一个可以运行java的环境了,我在本地用对应版本的jdk编译好了再丢上运行也是一样,防不住啥,太泛泛<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># tar xf jdk-8u151-linux-x64.tar.gz</span><br><span class="line"># mv jdk1.8.0_151/ /usr/local/</span><br><span class="line"># ln -s /usr/local/jdk1.8.0_151/ /usr/local/jdk</span><br><span class="line"># tar xf apache-tomcat-8.5.24.tar.gz</span><br><span class="line"># mv apache-tomcat-8.5.24 /usr/local/</span><br><span class="line"># ln -s /usr/local/apache-tomcat-8.5.24/ /usr/local/tomcat</span><br><span class="line"># ll /usr/local/</span><br><span class="line"># vi /etc/profile</span><br><span class="line">  export JAVA_HOME=/usr/local/jdk/ </span><br><span class="line">  export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH </span><br><span class="line">  export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar</span><br><span class="line">  export TOMCAT_HOME=/usr/local/tomcat</span><br><span class="line"># source /etc/profile</span><br><span class="line"># java -version</span><br><span class="line"># javac</span><br></pre></td></tr></table></figure></p>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/17/tomcat-sec/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/Tomcat-安全部署实战指南/">Tomcat 安全部署实战指南</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/Tomcat-安全部署实战指南/">#Tomcat 安全部署实战指南</a>
</div>




</div>
</div>


    <div class="main">
<div class="blog-post">
    <!-- Title -->
    
      <h1 class="blog-post-title">
        <a href="/2017/12/13/samba-sec/">跨平台快速文件共享 Samba</a>
      </h1>
    
    <!-- Date and Author -->
    <p class="blog-post-meta">
        2017-12-13
        
            by klion
        
    </p>

    

    <!-- Content -->
    <p>0x01 关于smaba<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主要用于实现不同系统平台间的文件共享,配置非常简单,轻量,适合用于常规办公内网环境中</span><br><span class="line">linux &lt;==&gt; windows &lt;==&gt; unix</span><br></pre></td></tr></table></figure></p>
<p>此次演示环境<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS6.9 x86_64	ip:192.168.3.55 samba服务器</span><br><span class="line">CentOS6.9 x86_64	ip:192.168.3.57 用来模拟smb客户端进行访问测试</span><br></pre></td></tr></table></figure></p>
<p>0x02 samba服务默认所监听的端口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">137/udp,138/udp nmb 进程提供netbios解析,以满足基于 CIFS 协议的共享访问环境</span><br><span class="line">138/tcp,445/tcp smb 进程主要为客户端提供文件共享,打印机服务以及用户权限验证</span><br></pre></td></tr></table></figure></p>
<p>0x03 使用samba客户端工具 <code>smbclient</code>,其实有些类似于ftp的客户端工具,也是一种交互式的访问</p>
<p><code>在linux下使用smbclient访问windows中的共享目录</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># smbclient -L 192.168.3.23 -U administrator</span><br><span class="line"># smbclient //192.168.3.23/linux_dir -U dcadmin</span><br><span class="line"># mount -t cifs //192.168.3.23/linux_dir /mnt/windows/ -o username=dcadmin 注意,此处要使用cifs协议进行挂载</span><br></pre></td></tr></table></figure></p>
    <!-- Only display the Read More link if we are displaying an excerpt -->
    
        <p id="readmore">
            <a href="/2017/12/13/samba-sec/">
                Read More >>>
            </a>
        </p>
    

    <hr />

    


<div class="blog-categories-container">
    <span><img src="/image/categoriesicon.png" alt=""/></span> 
    <a href="/categories/Samba/">Samba</a>
</div>


    


<div class="blog-tags-container">
    <span><img src="/image/tagsicon.png" alt=""/></span>
    <a href="/tags/Samba/">#Samba</a>
</div>




</div>
</div>




<div id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
</div>



  </div>
  <!-- Footer -->
  <div id="footer">
  <div id="footer-social">
    
    
    
    
    
    
</div>

  <p id="footer-info">
    &copy; 2018 APT-404<br>
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> -
    Theme <a href="https://github.com/Suolawangzai/hexo-theme-nebula" target="_blank">nebula</a>
  </p>

  <div id="busuanzi">
    <span id="busuanzi_container_site_pv">
      &hearts;
    Total visits: <span id="busuanzi_value_site_pv"></span>
    </span>
  </div>
  <!--
  <div id="footer-info">
    &copy; 2018 APT-404<br>
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
  </div>
-->
</div>

  <!-- After footer scripts -->
  <!-- Disqus Comments -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="/js/main.js"></script>

</body>

</html>
